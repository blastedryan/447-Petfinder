<!DOCTYPE html>
<html lang="en">
<head>
    <!---Stylesheet for bootstrap --->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <script src='https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css' rel='stylesheet' />
    
    <meta charset="UTF-8">
    <title>Title</title>
    <!---To get custom fonts --->
    <link href='https://fonts.googleapis.com/css?family=Archivo Narrow' rel='stylesheet'>
    <style>
        body{
            font-family: 'Archivo Narrow',"Times New Roman";font-size: 22px;
        }

	#map {
            position: absolute;
	}


    .mapboxgl-popup {
        max-width: 400px;
        font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
    }

  	
	.mapboxgl-popup-content {
	    text-align: center;
	    font-family: 'Open Sans', sans-serif;
	    
	}
  
	
    </style>
    </head>
<body>
    <!-- Code to get the accordian file working-->
    <div class = "jumbotron jumbotron-fluid text-center">
        <div class = "container">
            <h1>Petfinder Geospatial Search</h1>
            <p>Search for pets in your area based on your specifications</p>
        </div>
    </div>
  <div id="accordion">
  <form  method="GET" action="">
  <!--Breed-->
  <div class="card">
    <div class="card-header text-center bg-dark text-white" id="headingOne">
      <h5 class="mb-0">
        <button type="button" class="btn btn-link" data-toggle="collapse" data-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
          Breed
        </button>
      </h5>
    </div>

    <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
      <div class="card-body">
       
        <label for="breed">Breed:</label>
         <input type="text" name="breed">
      </div>
    </div>
  </div>


  <!--Age -->
  <div class="card">
    <div class="card-header text-center bg-dark text-white" id="headingTwo">
      <h5 class="mb-0">
        <button type="button" class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
          Age
        </button>
      </h5>
    </div>
    <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
      <div class="card-body">
        
        <label for="age">Age:</label>
        <select name="age">
            <option value="young">Young</option>
            <option value="medium">Medium</option>
            <option value="old">Old</option>
        </select>

      </div>
    </div>
  </div>

  <!--Size-->
  <div class="card">
    <div class="card-header text-center bg-dark text-white" id="headingThree">
      <h5 class="mb-0">
        <button type="button" class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
          Size
        </button>
      </h5>
    </div>
    <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
      <div class="card-body">
       
        Size:
        <input type="checkbox" name="size" value="small" id="size_small">
        <label for="id_small">Small</label>
        <input type="checkbox" name="size" value="medium" id="size_medium">
        <label for="size_medium">Medium</label>
        <input type="checkbox" name="size" value="large" id="size_large">
        <label for="size_large">Large</label>
        <input type="checkbox" name="size" value="xlarge" id="size_xlarge">
        <label for="size_xlarge">Extra-Large</label>
      </div>
    </div>
  </div>

  <!--Gender-->
 <div class="card">
    <div class="card-header text-center bg-dark text-white" id="headingFour">
      <h5 class="mb-0">
        <button type="button" class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
          Gender
        </button>
      </h5>
    </div>
    <div id="collapseFour" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
      <div class="card-body">
        
        Gender:
        <input type="checkbox" name="male">
        <label for="male">Male</label>
        <input type="checkbox" name="female">
        <label for="female">Female</label>

      </div>
    </div>
  </div>

  <!--Good With-->
  <div class="card">
    <div class="card-header text-center bg-dark text-white" id="headingFive">
      <h5 class="mb-0">
        <button type="button" class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
          Good With
        </button>
      </h5>
    </div>
    <div id="collapseFive" class="collapse" aria-labelledby="headingFive" data-parent="#accordion">
      <div class="card-body">
        
        Good With:
        <input type="checkbox" name="kids">
        <label for="kids">Kids</label>
        <input type="checkbox" name="dogs">
        <label for="dogs">Dogs</label>
        <input type="checkbox" name="cats">
        <label for="cats">Cats</label>
      </div>
    </div>
  </div>

  <!--Coat Length-->
  <div class="card">
    <div class="card-header text-center bg-dark text-white" id="headingSix">
      <h5 class="mb-0">
        <button type="button" class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseSix" aria-expanded="false" aria-controls="collapseSix">
          Coat Length
        </button>
      </h5>
    </div>
    <div id="collapseSix" class="collapse" aria-labelledby="headingSix" data-parent="#accordion">
      <div class="card-body">
        Coat Length
        <input type="checkbox" name="long">
        <label for="long">Long</label>     
        <input type="checkbox" name="short">
        <label for="short">Short</label>   
      </div>
    </div>
  </div>

  <!--Color-->
  <div class="card">
    <div class="card-header text-center bg-dark text-white" id="headingSeven">
      <h5 class="mb-0">
        <button type="button" class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseSeven" aria-expanded="false" aria-controls="collapseSeven">
          Color
        </button>
      </h5>
    </div>
    <div id="collapseSeven" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
      <div class="card-body">
      
        <input type="checkbox" name="blonde">
        <label for="blonde">Blonde</label>     
        <input type="checkbox" name="black">
        <label for="black">Black</label>   
      </div>
    </div>
  </div>

  <!--Care + Behavior-->
  <div class="card">
    <div class="card-header text-center bg-dark text-white" id="headingEight">
      <h5 class="mb-0">
        <button type="button" class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseEight" aria-expanded="false" aria-controls="collapseEight">
          Care+Behavior
        </button>
      </h5>
    </div>
    <div id="collapseEight" class="collapse" aria-labelledby="headingeight" data-parent="#accordion">
      <div class="card-body">
        (?)
      </div>
    </div>
  </div>

  <!--Days on Petfinder-->
  <div class="card">
    <div class="card-header text-center bg-dark text-white" id="headingNine">
      <h5 class="mb-0">
        <button type="button" class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseNine" aria-expanded="false" aria-controls="collapseNine">
          Days on Petfinder
        </button>
      </h5>
    </div>
    <div id="collapseNine" class="collapse" aria-labelledby="headingNine" data-parent="#accordion">
      <div class="card-body">
        Days on Petfinder
        <input type="radio" name="days">
        <label for="1day">1 Day</label>     
        <input type="radio" name="days">
        <label for="15day">15 Days</label>  
        <input type="radio" name="days">
        <label for="30day">30 Days</label>
      </div>
    </div>
  </div>
  <div class="card">
    <div class="card-header text-center bg-dark text-white" id="headingTen">
      <h5 class="mb-0">
        <button type="button" class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseTen" aria-expanded="false" aria-controls="collapseTen">
          Shelter
        </button>
      </h5>
    </div>
    <div id="collapseTen" class="collapse" aria-labelledby="headingTen" data-parent="#accordion">
      <div class="card-body">
        <input type="checkbox" name="shelter_rescue">
      </div>
    </div>
  </div>
  
  <input type="submit" value="search">
  </form>
{% if search_query %}
  <p>The most recent search is:
{% for field, value in search_query.items %}
  <span style="font-weight: bold;">{{field}}</span>: {{value}} 
{% endfor %}
{% endif %}
</p>

    <div class = "container">
      <h2 class = "text-center">
	Pets within 10 mile radius
      </h2>
      
      <div id='map' style='width: 800px; height: 600px;'></div>
    </div>
    
    <script>

      mapboxgl.accessToken ='<insert key here>'
      
      
      var map = new mapboxgl.Map({
	  container: 'map',
	  style: 'mapbox://styles/mapbox/streets-v11',
	  center:[-77.04, 38.907],
	  zoom: 11.5
      });



      map.on('load', function () {
	  map.loadImage(
	      'https://docs.mapbox.com/mapbox-gl-js/assets/custom_marker.png',
	      
	      // Add an image to use as a custom marker
	      function (error, image) {
		  if (error) throw error;
		  map.addImage('custom-marker', image);
		  
		  map.addSource('places', {
		      'type': 'geojson',
		      'data': {
			  'type': 'FeatureCollection',
			  'features': [
			      {
				  'type': 'Feature',
				  'properties': {
				      'description':
				      '<strong>Walter - Pembroke Welsh Corgi</strong>'
				  },
				  'geometry': {
				      'type': 'Point',
				      'coordinates': [-77.038659, 38.931567]
				  }
			      },
			      {
				  'type': 'Feature',
				  'properties': {
				      'description':
				      '<strong>Gwyneth - King Charles Cocker Spaniel</strong>'
				  },
				  'geometry': {
				      'type': 'Point',
				      'coordinates': [-77.090372, 38.881189]
				  }
			      }
			  ]
		      }
		  });
		  
		  // Add a layer showing the places.
		  map.addLayer({
		      'id': 'places',
		      'type': 'symbol',
		      'source': 'places',
		      'layout': {
			  'icon-image': 'custom-marker',
			  'icon-allow-overlap': true
		      }
		  });
	      }
	  );
	  
	  // Create a popup, but don't add it to the map yet.
	  var popup = new mapboxgl.Popup({
	      closeButton: false,
	      closeOnClick: false
	  });
	  
	  map.on('mouseenter', 'places', function (e) {
	      // Change the cursor style as a UI indicator.
	      map.getCanvas().style.cursor = 'pointer';
	      
	      var coordinates = e.features[0].geometry.coordinates.slice();
	      var description = e.features[0].properties.description;
	      
	      // If the map is zoomed out such that multiple
	      // copies of the feature are visible, the popup appears
	      // over the copy being pointed to.
	      while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
		  coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
	      }
	      
	      // Populate the popup and set its coordinates
	      // based on the feature found.
	      popup.setLngLat(coordinates).setHTML(description).addTo(map);
	  });
	  
	  map.on('mouseleave', 'places', function () {
	      map.getCanvas().style.cursor = '';
	      popup.remove();
	  });
      });


    </script>
    
   <!--Scripts for bootstrap-->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>

    
</body>
</html>
